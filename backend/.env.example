# ============================================
# Claude Code Mobile Backend - Environment Configuration
# ============================================

# ============================================
# Claude Code CLI Configuration
# ============================================
# IMPORTANT: This backend requires Claude Code CLI to be installed and authenticated
# 
# Installation:
#   npm install -g claude-code
#
# Authentication:
#   claude-code login
#
# Verification:
#   claude-code --version
#
# The backend uses @anthropic-ai/claude-agent-sdk which automatically uses
# the Claude Code CLI installation on this server. No API key needed in this file.
# ============================================

# Optional: Path to claude-code binary if not in system PATH
# CLAUDE_CODE_PATH=/usr/local/bin/claude-code

# Optional: Claude Code project context file
# PROJECT_CONTEXT_FILE=CLAUDE.md

# ============================================
# Server Configuration
# ============================================
PORT=3001
NODE_ENV=development
HOST=0.0.0.0

# ============================================
# Security Configuration
# ============================================
# JWT Secret for session tokens (change in production)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=15m
REFRESH_TOKEN_EXPIRATION=7d

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# Use '*' for development, specific origins for production
ALLOWED_ORIGINS=http://localhost:8081,exp://192.168.1.100:8081

# ============================================
# Rate Limiting Configuration
# ============================================
# Window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window per IP/user
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# File Upload Configuration
# ============================================
MAX_FILE_SIZE=50mb
# Note: File type restrictions are handled by Claude Code CLI
# These settings are for HTTP uploads only
ALLOWED_FILE_TYPES=.ts,.tsx,.js,.jsx,.json,.md,.txt,.css,.html,.yml,.yaml

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOG_DIR=./logs

# ============================================
# WebSocket Configuration
# ============================================
# Heartbeat interval in milliseconds (default: 30 seconds)
WS_HEARTBEAT_INTERVAL=30000
# Connection timeout in milliseconds (default: 60 seconds)
WS_TIMEOUT=60000
# Maximum WebSocket connections per IP
WS_MAX_CONNECTIONS_PER_IP=5
# WebSocket connection rate limit window (milliseconds)
WS_CONNECTION_WINDOW_MS=60000

# ============================================
# Session Storage Configuration
# ============================================
# Directory for session persistence
SESSIONS_DIR=./data/sessions

# ============================================
# Monitoring Configuration (Optional)
# ============================================
SENTRY_DSN=
ANALYTICS_ENABLED=false

# ============================================
# Notes
# ============================================
# - No ANTHROPIC_API_KEY needed - uses Claude Code CLI authentication
# - Claude Code CLI must be running on the same server as this backend
# - Tools (read_file, write_file, git, etc.) are provided by Claude Code CLI
# - Slash commands (/help, /cost, /clear, etc.) handled by Claude Code CLI
# - Cost tracking automatic via Claude Agent SDK
